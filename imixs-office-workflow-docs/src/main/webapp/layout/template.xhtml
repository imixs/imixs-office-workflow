<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:i="http://java.sun.com/jsf/composite/imixs">

<h:head>
	<meta name="viewport" content="width=device-width" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta content="text/javascript" http-equiv="Content-Script-Type" />
	<meta content="text/css" http-equiv="Content-Style-Type" />
	<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

	<title>#{app.application_title}</title>

	<!-- *** CSS *** -->
	
	<link rel="shortcut icon" type="image/x-icon"
		href="#{facesContext.externalContext.requestContextPath}/layout/favicon.ico" />

	<!-- imixs-responsive css -->
	<link
		href="#{facesContext.externalContext.requestContextPath}/layout/css/imixs-basic.css?build=#{app.application_build_timestamp}"
		charset="UTF-8" type="text/css" rel="stylesheet" />
	<link
		href="#{facesContext.externalContext.requestContextPath}/layout/css/imixs-layout.css?build=#{app.application_build_timestamp}"
		charset="UTF-8" type="text/css" rel="stylesheet" />

	<!-- imixsHeader (must be loaded before office-css! -->
	<i:imixsHeader disablecss="false"
		dateformat="#{message.datePatternShort}"
		build="#{app.application_workflow_build}"
		theme="#{facesContext.externalContext.requestContextPath}/layout/themes/#{app.application_theme}" />

	<!--  font icons -->
	<link
		href="#{facesContext.externalContext.requestContextPath}/layout/css/fonts/open_sans.css?build=#{app.application_build_timestamp}"
		charset="UTF-8" type="text/css" rel="stylesheet" />
	<link
		href="#{facesContext.externalContext.requestContextPath}/layout/css/fonts/typicons.css?build=#{app.application_build_timestamp}"
		charset="UTF-8" type="text/css" rel="stylesheet" />

	<!-- imixs-office-workflow css -->
	<link
		href="#{facesContext.externalContext.requestContextPath}/marty/imixs-marty.css?build=#{app.application_build_timestamp}"
		charset="UTF-8" type="text/css" rel="stylesheet" />
	<link
		href="#{facesContext.externalContext.requestContextPath}/layout/css/office-theme.css?build=#{app.application_build_timestamp}"
		charset="UTF-8" type="text/css" rel="stylesheet" />
		
	<link
		href="#{facesContext.externalContext.requestContextPath}/layout/css/office-docs.css?build=#{app.application_build_timestamp}"
		charset="UTF-8" type="text/css" rel="stylesheet" />
	<!-- custom css -->
	<link
		href="#{facesContext.externalContext.requestContextPath}/layout/css/custom.css?build=#{app.application_build_timestamp}"
		charset="UTF-8" type="text/css" rel="stylesheet" />


	<!-- *** MS IE Support *** -->

	<!-- IE 7 support -->
	<h:outputText
		value="&lt;!--[if IE 7]&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;#{facesContext.externalContext.requestContextPath}/layout/css/ie-support.css&quot; /&gt;&lt;![endif]--&gt;"
		escape="false" />
	<!-- IE 8 support -->
	<h:outputText
		value="&lt;!--[if IE 8]&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;#{facesContext.externalContext.requestContextPath}/layout/css/ie-support.css&quot; /&gt;&lt;![endif]--&gt;"
		escape="false" />
	<!-- IE 9 support -->
	<h:outputText
		value="&lt;!--[if IE 9]&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;#{facesContext.externalContext.requestContextPath}/layout/css/ie-support.css&quot; /&gt;&lt;![endif]--&gt;"
		escape="false" />
	<!-- IE 10 support -->
	<h:outputText
		value="&lt;!--[if IE 10]&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;#{facesContext.externalContext.requestContextPath}/layout/css/ie-support.css&quot; /&gt;&lt;![endif]--&gt;"
		escape="false" />
		

	<!-- *** SCRIPTS *** -->

	<!-- tinyMCE -->
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/js/tinymce/tinymce.min.js?build=#{app.application_build_timestamp}"></script>

	<!-- datepicker regional -->
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/js/#{message['jquey.datepicker.regional']}?build=#{app.application_build_timestamp}"></script>

	<!-- Load the marty component script -->
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/marty/imixs-marty.js?build=#{app.application_build_timestamp}"></script>

	<!-- Load DataTablePlugin  -->
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/js/jquery.dataTables.min.js?build=#{app.application_build_timestamp}"></script>

	<!-- Chart.js -->
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/js/chartjs/Chart.bundle.min.js?build=#{app.application_build_timestamp}"></script>

	<!-- Imixs-Office-Workflow  -->
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/js/imixs-core.js?build=#{app.application_build_timestamp}"></script>
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/js/imixs-office-workflow.js?build=#{app.application_build_timestamp}"></script>

	<ui:insert name="header">
		<!-- default  -->
	</ui:insert>

</h:head>
<h:body>
	<f:view locale="#{userController.locale}">
	
		<div id="header">
			<div id="imixs-servicenav">
				<ui:insert name="servicenav">
					<ui:include src="servicenav.xhtml" />
				</ui:insert>
			</div>
			<div id="imixs-header">
				<ui:insert name="header">
					<ui:include src="header.xhtml" />
				</ui:insert>
			</div>

		</div>
		<!-- END header -->


		<!-- content -->
		<div id="container">
			<div id="imixs-content">
				<ui:insert name="content">
					<h1>Default Content</h1>
				</ui:insert>
			</div>
		</div>
		<!-- END content -->

		<!-- footer -->
		<div id="footer">
			<div id="footer1">
				<ui:insert name="extra">
					<ui:include src="/layout/extra.xhtml" />
				</ui:insert>
			</div>
			<div id="footer2">
				<ui:insert name="footer">
					<ui:include src="/layout/footer.xhtml" />
				</ui:insert>
			</div>
		</div>
		<!-- END footer -->

		<div class="imixs-wait">
			<!-- empty -->
		</div>
	</f:view>


	<script type="text/javascript">
		/*<![CDATA[*/

		/* Init Script */
		var imixs = IMIXS.org.imixs.core, 
			imixsOfficeWorkflow = IMIXS.com.imixs.workflow.office;

		imixsOfficeWorkflow.contextPath="#{facesContext.externalContext.requestContextPath}";
		
		$(document).ready(function() {
			
			// init layout
			imixsOfficeWorkflow.initLayout();
			
			layoutOfficeEditor();
			
			// customize datepicker.... verify resource bundle key...
			if ("true"==="#{app['jquey.datepicker.showWeek']}") {
				$('.imixs-date').datepicker('option', 'showWeek', '#{app["jquey.datepicker.showWeek"]}');
			}
			
		});
		
		/* laest sich im moment nicht auslagern (script_url!) see issue #87 */
		layoutOfficeEditor = function() {
			// Layout office default editor
			tinymce.init({
				  selector: 'textarea.imixs-editor',
				  height: 300,
				  plugins: [
				    'advlist autolink lists link image preview',
				    'searchreplace code fullscreen',
				    'contextmenu paste code'
				  ],
					paste_data_images: true,
					paste_preprocess : function(pl, o) {
					    if (o.content.length>160000) {
					 		alert("#{message.error_message_mce_image_size}");
					 		o.content="";
					    }
					},
				  toolbar: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | removeformat',
				  content_css : "#{facesContext.externalContext.requestContextPath}/layout/css/tinymce.css"
				});
			
			// layout tinymce for minutes
			tinymce
				.init({
					selector : 'textarea.imixs-editor-basic',
					height : 200,
					menubar : false,
					statusbar : true,
					plugins : [ 'advlist autolink lists link image',
							'searchreplace', 'contextmenu paste' ],
					paste_data_images: true,
					paste_preprocess : function(pl, o) {
					    if (o.content.length>160000) {
					 		alert("#{message.error_message_mce_image_size}");
					 		o.content="";
					    }
					},
					toolbar : 'undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | removeformat',
					content_css : "#{facesContext.externalContext.requestContextPath}/layout/css/tinymce.css"

				});
		};
		/*]]>*/
	</script>

</h:body>

</html>