<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:marty="http://java.sun.com/jsf/composite/marty"
	xmlns:i="http://xmlns.jcp.org/jsf/composite/imixs"
	template="/layout/template.xhtml">


	<f:metadata>
		<f:viewAction action="#{workflowController.onLoad()}" />
	</f:metadata>

	<ui:define name="content">
		<f:view>
			<h:form id="space_form_id">

				<div class="imixs-form">

					<div class="imixs-header">
						<h1>
							<h:outputText value="#{message['space.title']}: " />
							<h:outputText
								rendered="#{! empty workflowController.workitem.item['txtParentname']}"
								value="#{workflowController.workitem.item['txtParentname']}" />

							<h:outputText
								rendered="#{! empty workflowController.workitem.item['txtParentname']}"
								value="." />


							<h:outputText
								value="#{workflowController.workitem.item['txtspacename']} " />
						</h1>
					</div>
					<!-- ########## Error ########## -->
					<ui:include src="/pages/error_message.xhtml" />

					<div class="imixs-body">
						<div class="imixs-tabs">
							<ul>
								<li><a href="#tab-1">#{message['space.sub_general']}</a></li>
								<ui:fragment rendered="#{app.containsKey('space.sub_custom')}">
									<li><a href="#tab-2">#{app['space.sub_custom']}</a></li>
								</ui:fragment>
							</ul>

							<div id="tab-1">

								<div class="ui-state-highlight ui-corner-all"
									style="margin-bottom: 10px; padding: .5em;">
									<p>#{message['space.help_general']}</p>
								</div>

								<div class="imixs-form-panel">
									<dl class="columns-1">
										<dt>
											<h:outputLabel for="name_id" value="#{message.name}">
												<h:message style="color: red" for="name_id"
													showSummary="true" showDetail="false" />
											</h:outputLabel>
										</dt>
										<dd>
											<h:outputText
												rendered="#{! empty workflowController.workitem.item['txtParentname']}"
												value="#{workflowController.workitem.item['txtParentname']}." />
											<h:inputText style="width: 20em;" required="true"
												value="#{workflowController.workitem.item['txtspacename']}"
												id="name_id">
											</h:inputText>
										</dd>

										<dt>
											<h:outputLabel for="description_id"
												value="#{message.description}">
												<h:message style="color: red" for="description_id"
													showDetail="false" showSummary="true" />
											</h:outputLabel>
										</dt>

										<dd>
											<h:inputTextarea required="false"
												value="#{workflowController.workitem.item['txtdescription']}"
												id="description_id" style="height: 5em; width: 95%">
											</h:inputTextarea>
										</dd>

									</dl>
								</div>


								<div class="imixs-form-panel">

									<h2>Team</h2>

									<div class="imixs-form-section-3">


										<!-- ******** space Manager ********* -->
										<dl>
											<dt>#{message['space.manager']}</dt>
											<dd>
												<marty:userListInput
													value="#{workflowController.workitem.itemList['nammanager']}"
													editmode="true" />
											</dd>
										</dl>


										<!-- ******** space Team ********* -->
										<dl>
											<dt>#{message['space.team']}</dt>
											<dd>
												<marty:userListInput
													value="#{workflowController.workitem.itemList['namteam']}"
													editmode="true" />
											</dd>
										</dl>

										<!-- ******** space Assitenz ********* -->
										<dl>
											<dt>#{message['space.assist']}</dt>
											<dd>
												<marty:userListInput
													value="#{workflowController.workitem.itemList['namassist']}"
													editmode="true" />
											</dd>
										</dl>

									</div>

								</div>

							</div>




						</div>
					</div>
					<!-- form-body end -->

					<!-- Custom Footer: workflow actions to overwrite the action result -->
					<ui:repeat value="#{workflowController.events}" var="event">
						<h:commandButton
							actionListener="#{workflowController.process(event.item['numactivityid'])}"
							action="notes" class="imixs-workflow-action" title=""
							value="#{event.item['txtname']}">
							<h:panelGroup 
								class="imixs-tooltip">
								<h:outputText value="#{event.item['rtfdescription']}"
									escape="false" />
							</h:panelGroup>
						</h:commandButton>
					</ui:repeat>
					<h:commandButton immediate="true" value="#{message.close}"
						styleClass="imixs-close-action" action="notes" />
				</div>
			</h:form>



		</f:view>
	</ui:define>



</ui:composition>

