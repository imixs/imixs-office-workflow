<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:i="http://java.sun.com/jsf/composite/imixs"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:marty="http://java.sun.com/jsf/composite/marty"
	template="/layout/template.xhtml">


	<!-- 
	  Organisation diagram for processes and spaces based on OrgChart
	  
	  See: https://github.com/dabeng/OrgChart
	
	 -->


	<ui:define name="scripts">
		<link
			href="#{facesContext.externalContext.requestContextPath}/layout/css/jquery.orgchart.css?build=#{app.application_build_timestamp}"
			type="text/css" rel="stylesheet" />

		<script type="text/javascript"
			src="#{facesContext.externalContext.requestContextPath}/js/jquery.orgchart.js"></script>
		<script type="text/javascript"
			src="#{facesContext.externalContext.requestContextPath}/js/imixs-office.organigram.js"></script>
		<script type="text/javascript">
			/*<![CDATA[*/
				
			// compute data structure by OrganigramController			
			datasource_processes=#{organigramController.processDatasource};
			datasource_spaces = #{organigramController.spaceDatasource};
			

			/*]]>*/
		</script>

		<link
			href="#{facesContext.externalContext.requestContextPath}/layout/css/office-theme-organigram.css?build=#{app.application_build_timestamp}"
			type="text/css" rel="stylesheet" />


	</ui:define>

	<ui:define name="content">
		<f:view>
			<h:form id="organisation_form_id">
				<div class="imixs-header">
					<h1 style="text-align: center;">#{message['organigram.title']}</h1>
				</div>
				<div class="imixs-body organigram-container">
					<div>
						<div id="organigram-processes" style="border-right: 1px solid #eee;height:100%;"></div>
					</div>
					<div style="width:100%;">
						<div id="organigram-spaces"  ></div>
					</div>
				</div>
				
				<div class="imixs-footer" style="padding-top:20px;">
					<h:commandButton value="#{message['nav.admin_processlist']}"
						actionListener="#{workflowController.reset}"
							immediate="true" styleClass="imixs-action"
							action="/pages/admin/processlist?faces-redirect=true"/>
					<h:commandButton value="#{message['nav.admin_spaces']}"
						actionListener="#{workflowController.reset}"
							immediate="true" styleClass="imixs-action"
							action="/pages/admin/spaces?faces-redirect=true"/>
					<h:commandButton value="#{message.close}"
							immediate="true" styleClass="imixs-close-action"
							action="notes" />
				</div>
			</h:form>
		</f:view>
	</ui:define>

</ui:composition>
