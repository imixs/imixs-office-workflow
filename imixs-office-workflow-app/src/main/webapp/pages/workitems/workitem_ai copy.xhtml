<f:subview xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:i="http://xmlns.jcp.org/jsf/composite/imixs">

	<!-- Integration of Imixs-AI		
	 -->
	<dl>
		<dt style="clear: left;">
			<h:outputText value="Prompt:" />
		</dt>
		<dd>
			<f:ajax render="chatlist">
				<h:inputTextarea required="false" value="#{workflowController.workitem.item['ai.chat.prompt']}"
					id="description_id" style="height: 5em; width: 95%">
				</h:inputTextarea>
				<h:commandButton value="#{message.send}" actionListener="#{aiController.sendAsync}" />
			</f:ajax>
		</dd>
	</dl>

	<h:panelGroup layout="block" id="chatlist" style="margin-bottom:10px;">
		Chat History....
		<br />
		<ui:repeat var="answer" value="#{aiController.chatHistory}">
			#{answer}
			<hr />
		</ui:repeat>
	</h:panelGroup>

	<h:commandScript name="refreshStockData" render="chatlist" />
	<h:outputScript>
		console.log('ich mache irgendwas');
		if (refreshStockData) {
		console.log('die methode scheint es zu geben');
		}
		setInterval(refreshStockData, 500); // Refresh every 500ms
	</h:outputScript>

</f:subview>