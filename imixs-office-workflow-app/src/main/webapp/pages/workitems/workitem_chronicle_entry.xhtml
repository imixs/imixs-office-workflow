<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:marty="http://java.sun.com/jsf/composite/marty"
	xmlns:i="http://xmlns.jcp.org/jsf/composite/imixs">


	<ui:param name="profile"
		value="#{userController.getProfile(chronicle.item['user'])}"></ui:param>


	<tr class="imixs-chronicle-time">


		<!--  Time -->
		<td style="width: 160px; vertical-align: top;">
		
			
				<h:graphicImage
					styleClass="imixs-chronicle-usericon" title="#{profile.item['txtusername']}"
					rendered="#{! empty profile.item['txtusericon']}"
					value="/api/snapshot/#{profile.item['$uniqueid']}/file/#{profile.item['txtusericon']}">
				</h:graphicImage> 
				
				<h:panelGroup layout="block">
				
				<h:outputText styleClass="imixs-chronicle-usericon"
					rendered="#{empty profile.item['txtusericon']}"
					value="#{profile.item['txtinitials']}" />
				</h:panelGroup>
				
			
			
			<h:outputText value="#{chronicle.item['date']}" style="margin-left:10px; font-size: 1.1em; line-height:1.4em;"
				title="#{userController.getUserName(chronicle.item['user'])}">
				<f:convertDateTime timeZone="#{message.timeZone}" type="both"
					pattern="#{message.dateTimePattern}" />
			</h:outputText> - #{profile.item['txtusername']}
		</td>


		
	</tr>
	<tr class="imixs-chronicle-entry">
		<!-- message -->
		<td>
			<!--  dms --> 
			<ui:fragment
				rendered="#{'dms' eq chronicle.item['type']}">
				<ui:include src="/pages/workitems/workitem_chronicle_dms.xhtml">
					<ui:param name="attachment" value="#{chronicle}" />
				</ui:include>
			</ui:fragment> 
			
			<!-- comment --> 
			<ui:fragment
				rendered="#{'comment' eq chronicle.item['type']}">
				<div class="image-block">
					<h:panelGroup rendered="#{'comment' eq chronicle.item['type']}" title="ads #{message.comment}"
						styleClass="typcn typcn-message"></h:panelGroup>
				</div>
				<div style="float: left;">
					
					<h:panelGroup styleClass="imixs-comments-entry">
						<h:outputText value="#{chronicle.item['message']}" />
					</h:panelGroup>
				</div>
			</ui:fragment> 
			
			<!-- history --> 
			<ui:fragment
				rendered="#{'history' eq chronicle.item['type']}">
				<div class="image-block">
					<h:panelGroup rendered="#{'history' eq chronicle.item['type']}"
						styleClass="typcn typcn-equals-outline"></h:panelGroup>
				</div>
				
				<h:panelGroup styleClass="imixs-comments-entry">
					<h:outputText value="#{chronicle.item['message']}" />
				</h:panelGroup>

			</ui:fragment>
		</td>
	</tr>

</ui:composition>

