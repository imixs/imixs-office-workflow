<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:marty="http://java.sun.com/jsf/composite/marty"
	xmlns:i="http://xmlns.jcp.org/jsf/composite/imixs">



	<h1>
		#{message.history}<span onclick="toggleChronicle()"
			style="float: right; cursor: pointer;"
			class="typcn typcn-code-outline"></span>
	</h1>

	<div class="filter">
		<ul>
			<li><span onclick="toggleChronicle()" class="typcn typcn-th-menu-outline" title="#{message.close}"></span></li>
			<li><span onclick="toggleChronicleEntries('comment')" class="typcn typcn-messages comment" title="#{message.comments}"></span></li>
			<li><span onclick="toggleChronicleEntries('files')" class="typcn typcn-folder-open files" title="#{message['form.attachments.files']}"></span></li>
			<li><span onclick="toggleChronicleEntries('reference')" class="typcn typcn-export-outline" title="#{message.references}"></span></li>
			<li><span onclick="toggleChronicleEntries('version')" class="typcn typcn-archive" title="#{message.versions}"></span></li>
		</ul>



	</div>

	<div>
		<table style="width: 100%;">

			<!-- print a headline for each year -->
			<ui:repeat var="year" value="#{chronicleController.getYears()}">

				<!-- print YEAR -->
				<tr>
					<td colspan="3"><h2
							style="width: 100%; text-align: center; border-bottom: 1px solid #ddd;">#{year}</h2></td>
				</tr>

				<!-- print all MONTHs -->
				<ui:repeat var="month"
					value="#{chronicleController.getMonths(year)}">
					<ui:param name="message_month" value="month_#{month}"></ui:param>
					<tr>
						<td colspan="3"><h3 style="width: 100%; text-align: center;">#{message[message_month]}</h3></td>

					</tr>

					<!-- show chronic by month -->
					<ui:repeat var="chronicle"
						value="#{chronicleController.getChroniclePerMonth(year,month)}">

						<ui:include src="workitem_chronicle_entry.xhtml">
							<ui:param name="chronicle" value="#{chronicle}" />
						</ui:include>
					</ui:repeat>

				</ui:repeat>


			</ui:repeat>

		</table>


	</div>


</ui:composition>

