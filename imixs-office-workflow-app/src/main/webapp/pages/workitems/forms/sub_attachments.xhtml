<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:marty="http://java.sun.com/jsf/composite/marty"
	xmlns:i="http://xmlns.jcp.org/jsf/composite/imixs">



	<script type="text/javascript">
		/*<![CDATA[*/

		/* reqlace special characters in attachemnt url */
		$(document).ready(
				function() {
					$(".imixs-form-attachments .attachmentlink").each(
							function(index, element) {
								var link = $(this).attr("href");
								if (link.indexOf('+') > -1) {
									link = link.replace('+', '%2B');
									$(this).attr("href", link);
								}
							});
				});

		/*]]>*/
	</script>



	<!-- **** General info ***** -->
	<div class="imixs-form-attachments">
		
		
			<div class="imixsLinkWidget">
				<f:ajax render=":#{dmsListComponent.clientId} link_input"
					onevent="hideComments">
					<h:commandLink styleClass="imixsLink_button"
						value="#{message['form.attachments.addlink']}"
						actionListener="#{dmsController.addLink}" />
					<h:inputText value="#{dmsController.link}" style="width:180px;"
						id="link_input" />
				</f:ajax>
			</div>
			<i:imixsFileUpload id="file_upload_id"
				labelButton="#{message['form.attachments.fileupload.button']}"
				labelHelp="#{message['form.attachments.fileupload.help']}"
				workitem="#{workflowController.workitem}"
				context_url="#{facesContext.externalContext.requestContextPath}/api/workflow/workitem/#{workflowController.workitem.item['$uniqueid']}"
				hideatachments="true" />
		
	</div>


	<script type="text/javascript">
		/*<![CDATA[*/

		$(document).ready(function() {
			// init...
			hideComments(null);
			$('.imixsLink_button').button({
				icons : {
					primary : "ui-icon-extlink"
				}
			});
		});

		function hideComments(event) {
			$('.dms-comment-panel').hide();
		}

		/*]]>*/
	</script>

</ui:composition>

