<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite">

<cc:interface>
	<cc:attribute name="value"></cc:attribute>
	<cc:attribute name="itemname"></cc:attribute>
	<cc:attribute name="workitem"></cc:attribute>
	<cc:attribute name="workflowgroup"></cc:attribute>
	<cc:attribute name="searchitemlist"></cc:attribute>
	<cc:attribute name="updateitemlist"></cc:attribute>
	<cc:attribute name="query"></cc:attribute>
	<cc:attribute name="render"></cc:attribute>
	<cc:attribute name="execute"></cc:attribute>
	<cc:attribute name="onevent"></cc:attribute>
	<cc:attribute name="required" default="false" type="java.lang.Boolean"></cc:attribute>
</cc:interface>

<cc:implementation>

	
	<div class="marty-userinput">
		<!-- Input Field -->
		<h:panelGroup id="input_box" layout="block"
			class="marty-suggestinput-inputbox">
			<h:inputText value="#{cc.attrs.value}" required="#{cc.attrs.required}" autocomplete="off"  id="suggest_input" class="imixs-suggest" requiredMessage="#{app.ERROR_REQUIRED}" >
				<f:ajax event="keyup" render="suggest_box" delay="600"
					listener="#{suggestInputController.search(cc.attrs.itemname,cc.attrs.value,cc.attrs.searchitemlist,cc.attrs.workflowgroup,cc.attrs.query)}" />
				<f:ajax event="blur" render="suggest_box" listener="#{suggestInputController.reset}" />
			</h:inputText>
			<h:panelGroup id="suggest_box">
				<h:panelGroup id="suggest_resultlist" layout="block"
					style="width:100%;margin-top:15px;"
					class="marty-userinput-suggestresultlist"
					rendered="#{! empty suggestInputController.searchResult}">

					<c:forEach var="suggest"
						items="#{suggestInputController.searchResult}">
						<div class="marty-userinput-suggestresultlist-entry"
							style="width: 100%;">
							<h:commandLink immediate="true"
								onclick="updateSuggestID($(this).parents('[id$=input_box]')[0],'#{suggest.item[cc.attrs.itemname]}')"
								actionListener="#{suggestInputController.update(workitem,suggest,cc.attrs.updateitemlist)}">
								<h:outputText style="font-weight: bold;"
									value="#{suggest.item[cc.attrs.itemname]}" />
								<f:ajax render="suggest_box #{cc.attrs.render}" 
										onevent="#{cc.attrs.onevent}"
										execute="#{cc.attrs.execute}" />
							</h:commandLink>

						</div>
					</c:forEach>
				</h:panelGroup>
			</h:panelGroup>
		</h:panelGroup>
	</div>
	




</cc:implementation>


</html>


